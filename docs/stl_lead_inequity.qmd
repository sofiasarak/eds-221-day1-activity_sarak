---
title: "Day 1 Activity (EDS 221)"
author: "Sofia Sarak"
format: html
editor: visual
---

## Working with St.Louis Data

```{r}
#| message: false
#loading libraries
library(tidyverse)
library(janitor)
```

Basic data prep and exploration

```{r}
#reading in data
stl_lead <- read_csv(here::here("data","stl_blood_lead.csv"))

#cleaning names
stl_lead <- stl_lead %>% janitor::clean_names()

#viewing the data
skimr::skim(stl_lead)
dim(stl_lead)

names(stl_lead)
```

Adding column for % of population that identifies as white

```{r}
#creating a new column for the prop white
prop_white <- ((stl_lead$white/stl_lead$total_pop)*100)

#creating new data frame
stl_blood_lead <- data.frame(stl_lead, prop_white)
```

### Visualizing data

Scatterplot

```{r}
#| fig-width: 2
#| fig-height: 3

stl_lead_plot <- ggplot(data=stl_blood_lead, aes(x=pct_elevated, y=prop_white, color="firebrick4")) + 
  geom_point() +
  labs(title="Children with Elevated Lead Blood Levels Compared to White Pop", subtitle="Expressed in percent of each census tract", x="Proportion of children with elevated lead blood levels", y="Proportion of population who identify as white") +
  theme_light() + theme(legend.position="none")

stl_lead_plot
```

There appears to be a negative relationship between the proportion of children with elevated lead blood levels and the proportion of the population that identifies as white. As the proportion of white people increases, the proportion of children with elevated lead blood levels decreases.

```{r}
#saving plot
ggsave(here::here("figs", "stl_lead_plot.png"), height=6, width=5)
```

Histogram

```{r}
stl_lead_histogram <- ggplot(data=stl_blood_lead, aes(x=pct_elevated)) + geom_histogram(fill="lavender", color="purple", bins=2) + 
  labs(title="Elevated PCT Frequencies", x="Elevated PCT (micrograms/L)", y="Frequency")

stl_lead_histogram
```
```{r}
#saving plot
ggsave(here::here("figs", "stl_lead_histogram.jpg"))
```

